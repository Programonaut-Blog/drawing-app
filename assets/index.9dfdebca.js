const C=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const g of c.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}};C();const w={black:"#000000",white:"#ffffff",red:"#ef4444",green:"#22c55e",blue:"#3b82f6",yellow:"#eab308",orange:"#f97316",violet:"#8b5cf6"};document.getElementById("canvas-container");const r=document.getElementById("canvas"),P=1920,x=1080;let B="draw";const l={mousedown:void 0,mouseup:void 0,mousemove:void 0},I={small:5,medium:10,big:15};let d=!1;const s=r.getContext("2d");s.imageSmoothingEnabled=!0;r.height=x;r.width=P;X();window.addEventListener("load",()=>{});function N(e,t){s.lineWidth=t,O(e)}function S(e,t){console.log(t),s.strokeStyle=w[t],s.fillStyle=w[t],T(e)}function T(e){const t=document.getElementById("colors").children;for(const n of t)n.classList.remove("selected");e.target.classList.add("selected")}function R(e,t){const n=document.getElementsByClassName("tool");for(const o of n)o.classList.remove("selected");const i=document.querySelector(".size.selected");i!==null&&(i.classList.remove("hide-select"),t==="rect"&&i.classList.add("hide-select")),e.target.parentElement.classList.add("selected"),B=t}function O(e){if(B==="rect")return;const t=document.getElementsByClassName("size");for(const n of t)n.classList.remove("selected");e!==void 0&&e.target.parentElement.classList.add("selected")}function f(e,t){var n=e.getBoundingClientRect(),i=e.width/n.width,o=e.height/n.height;return{x:(t.clientX-n.left)*i,y:(t.clientY-n.top)*o}}function M(e,t){for(const n in l)window.removeEventListener(n,l[n]),l[n]=void 0;switch(t){case"pen":window.addEventListener("mousedown",h),window.addEventListener("mouseup",y),window.addEventListener("mousemove",a),l.mousedown=h,l.mouseup=y,l.mousemove=a;break;case"path":window.addEventListener("mousedown",v),window.addEventListener("mouseup",p),l.mousedown=v,l.mouseup=p;break;case"polygon":window.addEventListener("mousedown",E),window.addEventListener("mouseup",L),l.mousedown=E,l.mouseup=L;break;case"rect":window.addEventListener("mousedown",b),window.addEventListener("mouseup",k),l.mousedown=b,l.mouseup=k;break}R(e,t)}function h(e){d=!0,s.beginPath(),a(e)}function y(e){d=!1}function a(e){if(!d)return;let{x:t,y:n}=f(r,e);s.lineTo(t,n),s.stroke(),s.beginPath(),s.moveTo(t,n)}function v(e){d=!0,s.beginPath(),a(e)}function p(e){d=!1;let{x:t,y:n}=f(r,e);s.lineTo(t,n),s.stroke()}let m=!1,z;function E(e){e.target.id==="canvas"&&(d=!0,m?q(e):(s.beginPath(),a(e)),m=!0)}function L(e){!m||(z=setTimeout(()=>{d=!1,s.closePath(),s.stroke(),m=!1},1e3))}function q(e){if(!d)return;clearTimeout(z);let{x:t,y:n}=f(r,e);s.lineTo(t,n),s.stroke()}let u={};function b(e){u=f(r,e)}function k(e){let{x:t,y:n}=f(r,e);s.fillRect(u.x,u.y,t-u.x,n-u.y)}function D(){s.clearRect(0,0,r.width,r.height)}function X(){const e=document.getElementById("colors").children;for(const i of e)i.addEventListener("click",o=>{S(o,i.classList.value.replace(/bg-(\w*).*/,"$1"))});const t=document.getElementsByClassName("tool");for(const i of t)i.addEventListener("click",o=>{M(o,i.id)});const n=document.getElementsByClassName("size");for(const i of n)i.addEventListener("click",o=>{N(o,I[i.id])});document.getElementById("clear").addEventListener("click",D),s.lineCap="round",document.getElementById("small").firstElementChild.click(),document.getElementById("pen").firstElementChild.click(),document.getElementById("black").click()}
